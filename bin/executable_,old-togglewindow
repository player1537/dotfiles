#!/usr/bin/env bash
p() { >&2 printf '%q' "${1:?}"; >&2 printf ' %q' "${@:2}"; >&2 printf '\n'; "$@"; }

xdotool() {
    p exec xdotool "$@"
}

IFS=$'\n'
scrcpy=( $(xdotool search --class "${1:?need classname}") )
focus=$(xdotool getwindowfocus)

for scrcpy in "${scrcpy[@]:?}"; do
    if [ "${scrcpy:?}" = "${focus:?}" ]; then
        (xdotool windowminimize "${scrcpy:?}")

    else
        (xdotool windowactivate "${scrcpy:?}")

    fi
done

