#!/usr/bin/env bash
pexec() { >&2 printf exec; >&2 printf ' %q' "$@"; >&2 printf '\n'; exec "$@"; }
self=${BASH_SOURCE[0]:?}

go---reindex() {
    pexec ctags-universal \
        -R \
        --c++-kinds=+p \
        --fields=+iaS \
        --extras=+q \
        -f "${HOME:?}/commontags" \
        "${HOME:?}/opt/src/rkcommon-1.11.0" \
        "${HOME:?}/opt/src/embree-4.1.0" \
        "${HOME:?}/opt/src/openvkl-1.3.2" \
        "${HOME:?}/opt/src/ospray-2.12.0" \
        "${HOME:?}/opt/src/ospray_studio-0.12.1" \
        ##
}

go-tui() {
    pexec vim \
        -R \
        +'set tags=~/commontags' \
        ##
}

# -font "-*-go mono-*-*-*-*-*-*-*-*-*-*-*-*"

go-gui() {
    pexec xterm \
        -class "XTags" \
        -maximized \
        -fa "Go Mono:size=10:antialias=true" \
        -fn "7x13" \
        -e \
            "${self:?}" \
            tui \
            ##
}

cli() {
    local tty
    if [ -t 0 ]; then
        tty=
    fi

    "go-${@-"${tty+tui}${tty-gui}"}"
}

cli "$@"
